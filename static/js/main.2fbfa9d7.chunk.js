(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{124:function(t,e,n){"use strict";n.r(e);var c=n(2),r=n(0),a=n.n(r),o=n(28),i=n.n(o),s=n(23),u=n(16),l=n(78),b=(n(97),n(7)),j=n(12),d=n.n(j),f=n(143),h=n(79),p=n.n(h);function O(t){var e=t.children;return Object(c.jsxs)("div",{className:p.a.container,children:[e,Object(c.jsx)(f.a,{})]})}var g=n(32),x=n(40),v=n(17);function m(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,a=Object(x.a)(t,["children","redirectTo"]),o=Object(u.c)(v.c.getIsLoggedIn);return Object(c.jsx)(b.b,Object(g.a)(Object(g.a)({},a),{},{children:o?e:Object(c.jsx)(b.a,{to:r})}))}function k(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,a=t.redirectTo,o=void 0===a?"/":a,i=Object(x.a)(t,["children","restricted","redirectTo"]),s=Object(u.c)(v.c.getIsLoggedIn)&&r;return Object(c.jsx)(b.b,Object(g.a)(Object(g.a)({},i),{},{children:s?Object(c.jsx)(b.a,{to:o}):e}))}var y=n(147),C=n(148),w=n(149),I={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#faa346"}};function L(){return Object(c.jsxs)("nav",{children:[Object(c.jsx)(s.b,{to:"/",exact:!0,style:I.link,activeStyle:I.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(c.jsx)(s.b,{to:"/contacts",exact:!0,style:I.link,activeStyle:I.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})}var U={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#faa346"}};function S(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(s.b,{to:"/register",exact:!0,style:U.link,activeStyle:U.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(c.jsx)(s.b,{to:"/login",exact:!0,style:U.link,activeStyle:U.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})}var z=n(152),R=n(83),F=n.n(R),T={container:{display:"flex",alignItems:"baseline",color:"#faa346"},name:{fontWeight:700,fontSize:18,marginRight:12},button:{color:"#faa346",fontWeight:700,fontSize:18,textTransform:"capitalize"}};function W(){var t=Object(u.b)(),e=Object(u.c)(v.c.getUsername);return Object(c.jsxs)("div",{style:T.container,children:[Object(c.jsxs)("span",{style:T.name,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",e]}),Object(c.jsx)(z.a,{type:"button",style:T.button,endIcon:Object(c.jsx)(F.a,{fontSize:"medium"}),onClick:function(){return t(v.a.logOut())},children:Object(c.jsx)("span",{children:"\u0412\u044b\u0439\u0442\u0438"})})]})}function E(){var t=Object(u.c)(v.c.getIsLoggedIn);return Object(c.jsx)(y.a,{position:"static",children:Object(c.jsx)(C.a,{children:Object(c.jsxs)(w.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(c.jsx)(w.a,{item:!0,children:Object(c.jsx)(L,{})}),t?Object(c.jsx)(w.a,{item:!0,children:Object(c.jsx)(W,{})}):Object(c.jsx)(w.a,{item:!0,children:Object(c.jsx)(S,{})})]})})})}var _=n(86),A=n(150),P=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,195))})),V=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,196))})),q=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,200))})),B=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(5)]).then(n.bind(null,202))})),D=Object(_.a)({palette:{primary:{main:"#011211"},secondary:{main:"#faa346"}}}),J="https://goit-react-hw-8-phonebook.netlify.app/".REACT_APP_BASE_URL_PROD;function M(){var t=Object(u.b)(),e=Object(u.c)(v.c.getIsFetchingCurrent);return console.log(e),Object(r.useEffect)((function(){t(v.a.fetchCurrentUser())}),[t]),Object(c.jsx)(O,{children:e?Object(c.jsx)("h1",{children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c React Skeleton"}):Object(c.jsxs)(A.a,{theme:D,children:[Object(c.jsx)(E,{}),Object(c.jsx)(b.d,{children:Object(c.jsxs)(r.Suspense,{fallback:Object(c.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(c.jsx)(k,{exact:!0,path:"/",component:P}),Object(c.jsx)(k,{path:"/register",component:V,restricted:!0}),Object(c.jsx)(k,{path:"/login",component:q,redirectTo:"/contacts",restricted:!0}),Object(c.jsx)(m,{path:"/contacts",component:B,redirectTo:"/login"})]})})]})})}d.a.defaults.baseURL=J,d.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var N=n(44),G=n(4),H=n(27),K=n(84),Q=n.n(K),X=n(85),Y=n.n(X),Z=n(56),$=[].concat(Object(N.a)(Object(G.f)({serializableCheck:{ignoredActions:[H.a,H.f,H.b,H.c,H.d,H.e]}})),[Q.a]),tt={key:"auth",storage:Y.a,whitelist:["token"]},et=Object(G.a)({reducer:{auth:Object(H.g)(tt,v.b),contacts:Z.c},middleware:$,devTools:!1}),nt=Object(H.h)(et);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(u.a,{store:et,children:Object(c.jsx)(l.a,{loading:null,persistor:nt,children:Object(c.jsx)(s.a,{children:Object(c.jsx)(M,{})})})})}),document.getElementById("root"))},17:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return O}));var c=n(18),r=n(4),a=n(13),o=n.n(a),i=n(26),s=n(12),u=n.n(s);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var l,b=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){u.a.defaults.headers.common.Authorization=""},d=Object(r.c)("auth/register",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var c,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:return r=t.sent,a=r.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",c(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(r.c)("auth/login",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var c,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:return r=t.sent,a=r.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",c(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:d,logOut:Object(r.c)("auth/logout",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,u.a.post("/users/logout");case 4:j(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",c(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:f,fetchCurrentUser:Object(r.c)("auth/refresh",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var c,r,a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){t.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),t.abrupt("return",n.rejectWithValue("need to log in"));case 5:return b(r),t.prev=6,t.next=9,u.a.get("/users/current");case 9:return a=t.sent,i=a.data,t.abrupt("return",i);case 14:t.prev=14,t.t0=t.catch(6),n.rejectWithValue(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}())},p=Object(r.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(l={},Object(c.a)(l,h.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(c.a)(l,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(c.a)(l,h.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(c.a)(l,h.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(c.a)(l,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(c.a)(l,h.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),l)}).reducer,O={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}}},56:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return z})),n.d(e,"a",(function(){return g}));var c=n(13),r=n.n(c),a=n(26),o=n(12),i=n.n(o),s=n(4),u=Object(s.b)("contacts/fetchContactsRequest"),l=Object(s.b)("contacts/fetchContactsSuccess"),b=Object(s.b)("contacts/fetchContactsError"),j=Object(s.b)("contacts/addContactRequest"),d=Object(s.b)("contacts/addContactSuccess"),f=Object(s.b)("contacts/addContactError"),h=Object(s.b)("contacts/deleteContactRequest"),p=Object(s.b)("contacts/deleteContactSuccess"),O=Object(s.b)("contacts/deleteContactError"),g=Object(s.b)("contacts/changeFilter");i.a.defaults.baseURL="http://localhost:4040";var x,v={fetchContacts:function(){return function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u()),t.prev=1,t.next=4,i.a.get("/contacts");case 4:n=t.sent,c=n.data,e(l(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(b(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t,e){return function(){var n=Object(a.a)(r.a.mark((function n(c){var a,o,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={name:t,number:e},c(j()),n.prev=2,n.next=5,i.a.post("/contacts",a);case 5:o=n.sent,s=o.data,c(d(s)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),c(f(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(h()),e.prev=1,e.next=4,i.a.delete("/contacts/".concat(t));case 4:n(p(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(O(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}},m=n(18),k=n(44),y=n(11),C=Object(s.d)([],(x={},Object(m.a)(x,l,(function(t,e){return e.payload})),Object(m.a)(x,d,(function(t,e){var n=e.payload;return[].concat(Object(k.a)(t),[n])})),Object(m.a)(x,p,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),x)),w=Object(s.d)("",Object(m.a)({},g,(function(t,e){return e.payload}))),I=Object(y.c)({items:C,filter:w}),L=n(42),U=function(t){return t.contacts.items},S=function(t){return t.contacts.filter},z={getContacts:U,getFilter:S,getVisibleContacts:Object(L.a)([U,S],(function(t,e){return function(t){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}(t)}))}},79:function(t,e,n){t.exports={container:"container_container__3TiUU"}},97:function(t,e,n){}},[[124,3,4]]]);
//# sourceMappingURL=main.2fbfa9d7.chunk.js.map